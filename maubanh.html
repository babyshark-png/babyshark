<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mẫu Bánh - Tiệm Bánh Cá Mập Con</title>
    <link rel="icon" href="asset/Image/shark-logo.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Pacifico&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --primary-glow-color: rgba(0, 200, 255, 0.7); 
            --secondary-glow-color: rgba(255, 105, 180, 0.7); 
            --bakery-cream: #FFF5E1;
            --bakery-brown: #A0522D;
            --ocean-blue-deep: #0A2463; 
            --ocean-blue-light: #3E92CC;
            --hero-title-blue: #00A9FF; 
            --coral-pink: #FF69B4;
            --shark-fin-grey: #8395A7;
            --section-bg-1: #03001C; 
            --section-bg-2: #10032B; 
            --header-hover-bg: rgba(255, 255, 255, 0.1);
            --header-active-underline: #FFD700; 
        }

        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden; 
            background-color: var(--ocean-blue-deep); 
            color: var(--bakery-cream); 
            scroll-behavior: smooth;
        }
        body.cart-open-no-scroll { /* Thêm class này khi modal mở để ngăn cuộn body */
            overflow: hidden;
        }

        .font-pacifico {
            font-family: 'Pacifico', cursive;
        }
        
        #hero-strip-3d-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%; 
            z-index: 0; 
            overflow: hidden;
        }
        .hero-strip-content-container {
            position: relative;
            z-index: 10;
        }

        @keyframes bounce-in { 
            0% { opacity: 0; transform: scale(0.3) translateY(-30px); }
            50% { opacity: 0.9; transform: scale(1.1); }
            80% { opacity: 1; transform: scale(0.89); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }
        .animate-bounce-in { animation: bounce-in 1s ease-out forwards; }

        @keyframes gentle-wave { 
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-6px); } 
        }
        .animate-gentle-wave { animation: gentle-wave 2.2s ease-in-out infinite; }

        @keyframes gradientBackgroundPage { 
            0% { background-position: 0% 50%; filter: hue-rotate(0deg) saturate(1.1); } 
            25% { background-position: 100% 30%; filter: hue-rotate(10deg) saturate(1.3); }
            50% { background-position: 0% 70%; filter: hue-rotate(-5deg) saturate(1.1); }
            75% { background-position: 100% 100%; filter: hue-rotate(5deg) saturate(1.3); } 
            100% { background-position: 0% 50%; filter: hue-rotate(0deg) saturate(1.1); } 
        }
        .page-animated-gradient-bg { 
            background: linear-gradient(-65deg, var(--ocean-blue-deep), var(--ocean-blue-light), #FFC0CB, var(--bakery-cream), var(--ocean-blue-deep));
            background-size: 800% 800%; 
            animation: gradientBackgroundPage 40s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite; 
        }

        .reveal-on-scroll { opacity: 0; transition: opacity 1.6s cubic-bezier(0.215, 0.610, 0.355, 1.15), transform 1.6s cubic-bezier(0.215, 0.610, 0.355, 1.15); will-change: opacity, transform; }
        .reveal-on-scroll.slide-in-left { transform: translateX(-100px) rotateY(15deg) scale(0.92); }
        .reveal-on-scroll.slide-in-right { transform: translateX(100px) rotateY(-15deg) scale(0.92); }
        .reveal-on-scroll.slide-in-up { transform: translateY(100px) scale(0.88) rotateX(-8deg); }
        .reveal-on-scroll.is-visible { opacity: 1; transform: translateX(0) translateY(0) rotateY(0deg) rotateX(0deg) scale(1); }
        
        .letter-reveal-bakery-page span { 
            opacity: 0; display: inline-block; 
            animation: revealLetterBakeryPageTheme 1.1s forwards; 
            transform-origin: 50% 50%;
            filter: blur(5px) brightness(0.7);
            will-change: opacity, transform, filter;
        }
        @keyframes revealLetterBakeryPageTheme {
            0% { opacity: 0; transform: translateY(50px) rotateX(-100deg) rotateY(25deg) scale(2.5); filter: blur(10px) brightness(0) contrast(3); }
            30% { opacity: 0.7; transform: translateY(10px) rotateX(-40deg) rotateY(8deg) scale(1.3); filter: blur(3px) brightness(0.8) contrast(1.6); }
            70% { opacity: 0.95; transform: translateY(-2px) rotateX(6deg) rotateY(-2deg) scale(0.98); filter: blur(0.3px) brightness(1) contrast(1.1); }
            100% { opacity: 1; transform: translateY(0) rotateX(0deg) rotateY(0deg) scale(1); filter: blur(0px) brightness(1) contrast(1); }
        }
        
        .sugar-crystal-section-maubanh { 
            min-height: 80vh; 
            background: linear-gradient(180deg, #FFE4E1 0%, #FFF0F5 50%, #FFE4E1 100%); 
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            position: relative; overflow: hidden; padding: 2rem;
        }
        #sugar-crystal-canvas-maubanh {
            border-radius: 1rem;
            box-shadow: 0 0 35px rgba(255, 255, 255, 0.6), 0 0 60px rgba(255, 182, 193, 0.4); 
        }

        .interactive-image-strip-section {
             margin-bottom: 2.5rem; 
             background-color: rgba(240, 249, 255, 0.8); 
             padding-top: 1.5rem; 
             padding-bottom: 1.5rem; 
             border-radius: 1rem; 
             box-shadow: 0 10px 25px rgba(0,50,100,0.1);
        }

        .interactive-image-strip {
          display: flex;
          width: 100%; 
          height: 380px; 
          overflow: hidden; 
          gap: 8px; 
        }

        .interactive-image-strip .strip-item {
          flex-shrink: 1; 
          flex-grow: 1; 
          overflow: hidden; 
          position: relative;
          transition: flex-basis 0.6s cubic-bezier(0.23, 1, 0.32, 1.2), transform 0.4s ease-out; 
          cursor: pointer;
          border-radius: 10px; 
          box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .interactive-image-strip .strip-item img {
          width: 100%; height: 100%; object-fit: cover; 
          display: block;
          transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1.2); 
        }
        
        .interactive-image-strip .strip-item:hover { 
            transform: translateY(-5px) scale(1.01); 
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .interactive-image-strip .strip-item:hover img {
            transform: scale(1.05); 
        }

        .interactive-image-strip .strip-item:nth-child(1) { flex-basis: 25%; }
        .interactive-image-strip .strip-item:nth-child(2) { flex-basis: 50%; } 
        .interactive-image-strip .strip-item:nth-child(3) { flex-basis: 25%; }

        .interactive-image-strip:hover .strip-item {
          flex-basis: 20%; 
        }
        .interactive-image-strip .strip-item:hover { 
          flex-basis: 60% !important; 
        }
        
        .cake-gallery-card {
            background-color: rgba(255, 255, 255, 0.9); 
            border-radius: 1.5rem; 
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transform-style: preserve-3d; 
            transition: transform 0.4s cubic-bezier(0.165, 0.84, 0.44, 1), box-shadow 0.4s ease;
            will-change: transform, box-shadow;
        }
        .cake-gallery-card:hover {
            transform: translateY(-10px) rotateX(5deg) rotateY(-3deg) scale(1.03);
            box-shadow: 0 20px 40px rgba(var(--coral-pink-rgb, 255,105,180), 0.3), 0 10px 20px rgba(0,0,0,0.15);
        }
        .cake-gallery-card img {
            transition: transform 0.5s ease;
        }
        .cake-gallery-card:hover img {
            transform: scale(1.1);
        }
        .cake-gallery-card .card-content {
            padding: 1.5rem;
            background: linear-gradient(to top, rgba(0,0,0,0.05), transparent); 
        }
        .cake-gallery-card h3 {
            color: var(--ocean-blue-deep);
            text-shadow: 1px 1px 2px rgba(255,255,255,0.5);
        }
        .cake-gallery-card p {
            color: var(--shark-fin-grey);
        }
        
        .stylish-button-enhanced { 
            transition: all 0.5s cubic-bezier(0.165, 0.84, 0.44, 1.2); 
            will-change: transform, box-shadow; 
        }
        .stylish-button-enhanced:hover { 
            transform: translateY(-8px) scale(1.12) rotate(-1.5deg); 
            box-shadow: 0 20px 35px rgba(0,0,0,0.3), 0 0 18px rgba(255,255,255,0.3), 0 0 25px var(--coral-pink); 
        }
        .ripple { position: absolute; border-radius: 50%; background-image: linear-gradient(45deg, rgba(255,222,173,0.5), rgba(255,182,193,0.3)); transform: scale(0); animation: ripple-effect-bakery 0.9s cubic-bezier(0.19, 1, 0.22, 1); will-change: transform, opacity; }
        @keyframes ripple-effect-bakery { 
            0% { transform: scale(0); opacity: 1; }
            70% { transform: scale(5.5); opacity: 0.35; }
            100% { transform: scale(6); opacity: 0; }
        }

        .section-container { width: 100%; max-width: 1200px; margin-left: auto; margin-right: auto; padding-left: 1rem; padding-right: 1rem; }
        .full-bleed-bg { width: 100vw; position: relative; left: 50%; right: 50%; margin-left: -50vw; margin-right: -50vw; }

        .header-nav-link {
            position: relative;
            padding: 0.5rem 0.25rem; 
            margin: 0 0.25rem; 
            color: white;
            transition: color 0.3s ease, transform 0.3s ease, background-color 0.3s ease; 
            text-decoration: none;
            border-radius: 6px; 
        }
        .header-nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px; 
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--header-active-underline);
            transition: width 0.3s ease-in-out;
        }
        .header-nav-link:hover {
            color: var(--header-active-underline);
            transform: translateY(-2px);
            background-color: var(--header-hover-bg); 
        }
        .header-nav-link:hover::after {
            width: 75%; 
        }
        .header-nav-link.active-link { 
            color: var(--header-active-underline);
            font-weight: 600; 
        }
        .header-nav-link.active-link::after {
             width: 75%;
        }
        
        .cake-filters {
            margin-bottom: 2rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.75rem;
        }
        .filter-button {
            background-color: rgba(255,255,255,0.1);
            color: var(--ocean-blue-deep); 
            border: 1px solid var(--ocean-blue-light);
            padding: 0.5rem 1rem;
            border-radius: 9999px; 
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .filter-button:hover, .filter-button.active {
            background-color: var(--coral-pink);
            color: white;
            border-color: var(--coral-pink);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(255,105,180,0.3);
        }

        /* Shopping Cart Modal - Cập nhật CSS */
        .cart-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6); /* Tăng độ mờ */
            z-index: 999; 
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .cart-modal-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .cart-modal {
            position: fixed;
            top: 0;
            right: -100%; /* Bắt đầu ngoài màn hình hoàn toàn */
            width: 400px; 
            max-width: 90vw; 
            height: 100%;
            background-color: #ffffff; 
            box-shadow: -8px 0 25px rgba(0,0,0,0.2); /* Tăng shadow */
            z-index: 1000;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1); /* Easing mượt hơn */
            display: flex;
            flex-direction: column;
            color: var(--ocean-blue-deep); 
        }
        .cart-modal.open {
            right: 0;
        }
        .cart-header {
            padding: 1.25rem 1.5rem; 
            border-bottom: 1px solid #e5e7eb; 
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f8f9fa; 
        }
        .cart-header h2 {
            font-family: 'Pacifico', cursive;
            font-size: 2rem; 
            color: var(--coral-pink);
        }
        .cart-close-btn {
            background: none;
            border: none;
            font-size: 2rem; 
            cursor: pointer;
            color: var(--shark-fin-grey);
            transition: color 0.2s, transform 0.2s;
        }
        .cart-close-btn:hover {
            color: var(--coral-pink);
            transform: rotate(90deg);
        }
        .cart-body {
            flex-grow: 1; /* Quan trọng: để body chiếm không gian và footer đẩy xuống */
            overflow-y: auto; 
            padding: 1.5rem;
            /* Thêm padding-bottom để không bị footer che mất item cuối nếu footer không sticky */
            /* padding-bottom: 120px;  Nếu footer không sticky bên trong modal */
        }
        .cart-item {
            display: flex;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px dashed #e0e0e0; 
        }
        .cart-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        .cart-item img {
            width: 80px; 
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            margin-right: 1rem;
            border: 1px solid #f0f0f0;
        }
        .cart-item-details {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between; 
        }
        .cart-item-details h4 {
            font-size: 1.05rem; 
            font-weight: 600;
            margin-bottom: 0.3rem;
            color: var(--ocean-blue-deep);
        }
        .cart-item-details p.item-price { 
            font-size: 0.95rem;
            color: var(--coral-pink);
            font-weight: 500;
            margin-bottom: 0.5rem; 
        }
        .cart-item-controls { 
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 0.5rem;
        }
        .cart-item-quantity {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            color: var(--shark-fin-grey);
        }
        .cart-item-quantity button { 
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            color: var(--ocean-blue-deep);
            width: 28px;
            height: 28px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .cart-item-quantity button:hover {
            background-color: #e0e0e0;
        }
        .cart-item-quantity input {
            width: 45px; 
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin: 0 0.5rem;
            padding: 0.35rem; 
            color: var(--ocean-blue-deep);
            font-size: 0.9rem;
        }
        .cart-item-remove-btn {
            background: none;
            border: none;
            color: #cc0000; 
            font-size: 1.2rem; 
            cursor: pointer;
            transition: color 0.2s, transform 0.2s;
        }
        .cart-item-remove-btn:hover {
            color: #990000;
            transform: scale(1.1);
        }
        .cart-empty-message {
            text-align: center;
            font-size: 1.1rem; 
            color: var(--shark-fin-grey);
            padding: 3rem 1rem; 
        }
        .cart-footer {
            padding: 1.5rem;
            border-top: 2px solid var(--coral-pink); 
            background-color: #f8f9fa; 
            /* Không cần sticky ở đây nữa vì cart-body sẽ flex-grow */
            /* position: sticky; */
            /* bottom: 0; */
            /* left: 0; */
            /* width: 100%; */
        }
        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.3rem; 
            font-weight: bold;
            margin-bottom: 1.25rem;
            color: var(--ocean-blue-deep);
        }
        .cart-checkout-btn {
            display: block;
            width: 100%;
            padding: 0.9rem; 
            background-color: var(--coral-pink);
            color: white;
            text-align: center;
            border: none;
            border-radius: 8px;
            font-size: 1.15rem; 
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
        }
        .cart-checkout-btn:hover {
            background-color: #e75480; 
            transform: scale(1.02);
        }
        .cart-icon-container {
            position: relative;
            cursor: pointer;
        }
        .cart-count {
            position: absolute;
            top: -8px;
            right: -10px;
            background-color: var(--coral-pink);
            color: white;
            border-radius: 50%;
            padding: 0.1em 0.4em;
            font-size: 0.75rem;
            font-weight: bold;
            border: 1px solid white;
            min-width: 20px; 
            text-align: center;
            line-height: 1.2;
        }


    </style>
</head>
<body class="bg-sky-100 text-gray-800 page-animated-gradient-bg"> 
    <div id="cart-modal-overlay" class="cart-modal-overlay"></div>
    <header class="bg-blue-500 shadow-lg sticky top-0 z-50">
        <div class="section-container py-3 px-4 md:px-6 flex justify-between items-center">
            <a href="Index.html" class="flex items-center space-x-2">
                <img src="asset/Image/shark-logo.png" alt="Logo Tiệm Bánh Cá Mập Con" class="h-16 md:h-20 rounded-lg transform transition-transform duration-300 hover:scale-110">
            </a>
            <nav class="hidden md:flex space-x-1 items-center">
                <a href="Index.html" class="header-nav-link">Trang Chủ</a>
                <a href="maubanh.html" class="header-nav-link active-link">Mẫu Bánh</a>
                <a href="Index.html#order" class="header-nav-link">Đặt Bánh</a>
                <a href="Index.html#contact" class="header-nav-link">Liên Hệ</a>
                <button id="cart-icon-btn" aria-label="Mở giỏ hàng" class="ml-4 text-white hover:text-yellow-300 transition-colors cart-icon-container">
                    <i class="fas fa-shopping-cart fa-lg"></i>
                    <span id="cart-count-badge" class="cart-count hidden">0</span>
                </button>
            </nav>
            <div class="md:hidden flex items-center">
                 <button id="cart-icon-btn-mobile" aria-label="Mở giỏ hàng" class="text-white mr-3 cart-icon-container">
                    <i class="fas fa-shopping-cart fa-lg"></i>
                    <span id="cart-count-badge-mobile" class="cart-count hidden">0</span>
                </button>
                <button id="mobile-menu-button" class="text-white focus:outline-none" aria-label="Mở menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="md:hidden hidden bg-blue-500">
            <a href="Index.html" class="block text-white hover:text-yellow-300 transition duration-300 px-4 py-3 text-sm">Trang Chủ</a>
            <a href="maubanh.html" class="block text-white bg-blue-600 px-4 py-3 text-sm font-semibold">Mẫu Bánh</a>
            <a href="Index.html#order" class="block text-white hover:text-yellow-300 transition duration-300 px-4 py-3 text-sm">Đặt Bánh</a>
            <a href="Index.html#contact" class="block text-white hover:text-yellow-300 transition duration-300 px-4 py-3 text-sm">Liên Hệ</a>
        </div>
    </header>

    <div id="cart-modal" class="cart-modal" role="dialog" aria-modal="true" aria-labelledby="cart-heading">
        <div class="cart-header">
            <h2 id="cart-heading" class="font-pacifico">Giỏ Hàng Của Bạn</h2>
            <button id="cart-close" class="cart-close-btn" aria-label="Đóng giỏ hàng">×</button>
        </div>
        <div id="cart-body" class="cart-body">
            <p class="cart-empty-message">Giỏ hàng của bạn đang trống!</p> 
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Tổng cộng:</span>
                <span id="cart-total-amount">0 VNĐ</span>
            </div>
            <button class="cart-checkout-btn">Tiến Hành Thanh Toán</button>
        </div>
    </div>


    <section class="interactive-image-strip-section relative py-10 md:py-16">
        <div id="hero-strip-3d-background" class="opacity-30"></div> 
        <div class="hero-strip-content-container section-container">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-10 font-pacifico text-blue-700 letter-reveal-bakery-page" style="text-shadow: 1px 1px 3px rgba(255,255,255,0.5);">
                Những Mẫu Bánh Nổi Bật
            </h2>
            <div class="interactive-image-strip reveal-on-scroll slide-in-up">
                <div class="strip-item">
                    <img src="asset/Image/banh-kem-dau-tay.jpg" alt="Bánh kem dâu tây ngọt ngào">
                </div>
                <div class="strip-item"> 
                    <img src="asset/Image/banh-sinh-nhat-ca-map.jpg" alt="Bánh sinh nhật chủ đề cá mập">
                </div>
                <div class="strip-item">
                    <img src="asset/Image/cupcake-ca-map-nhay-nhot.jpg" alt="Cupcake cá mập nhảy nhót">
                </div>
            </div>
        </div>
    </section>

    <div class="py-12 md:py-20 bg-sky-50 relative z-10"> 
        <div class="section-container text-center">
            <h1 class="text-4xl md:text-5xl font-bold text-blue-700 mb-4 font-pacifico animate-bounce-in">Thư Viện Bánh Xinh</h1>
            <p class="text-lg md:text-xl text-gray-700 max-w-2xl mx-auto">Khám phá những mẫu bánh ngon và đẹp mắt nhất từ Tiệm Bánh Cá Mập Con! Mỗi chiếc bánh là một câu chuyện ngọt ngào.</p>
        
            <div class="cake-filters mt-10 reveal-on-scroll slide-in-up">
                <button class="filter-button active" data-filter="all">Tất Cả</button>
                <button class="filter-button" data-filter="sinhnhat">Sinh Nhật</button>
                <button class="filter-button" data-filter="cupcake">Cupcake</button>
                <button class="filter-button" data-filter="dacbiet">Đặc Biệt</button>
                <button class="filter-button" data-filter="banhlanh">Bánh Lạnh</button>
            </div>
        </div>
    </div>

    <section id="sugar-magic-maubanh" class="sugar-crystal-section-maubanh relative z-10">
        <div class="text-center mb-12 section-container">
            <h2 class="text-4xl md:text-5xl font-extrabold mb-6 text-gray-700 reveal-on-scroll slide-in-up" style="text-shadow: 0 0 15px var(--bakery-cream);">
                Phép Màu <span style="color: var(--coral-pink);">Kẹo Đường</span> Lấp Lánh
            </h2>
            <p class="text-xl md:text-2xl text-gray-600 reveal-on-scroll slide-in-up" style="transition-delay: 0.2s; font-weight: 300;">
                Nơi những viên kẹo đường kết tinh thành những hình hài nghệ thuật, điểm xuyết cho chiếc bánh thêm phần lung linh.
            </p>
        </div>
        <canvas id="sugar-crystal-canvas-maubanh" class="reveal-on-scroll slide-in-up" style="transition-delay: 0.4s;"></canvas>
    </section>


     <section id="gallery" class="py-16 md:py-24 bg-gradient-to-b from-teal-100 to-sky-200 relative z-10">
        <div class="section-container">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-10">
                <div class="cake-gallery-card reveal-on-scroll slide-in-left" data-category="sinhnhat dacbiet" data-id="banh-ca-map-mini" data-name="Bánh Cá Mập Mini" data-price="135000" data-image="asset/Image/banh-ca-map-mini.jpg">
                    <img src="asset/Image/banh-ca-map-mini.jpg" alt="Bánh Cá Mập Mini" class="w-full h-72 object-cover">
                    <div class="card-content">
                        <h3 class="text-2xl font-semibold mb-1 font-pacifico">Bánh Cá Mập Mini</h3>
                        <p class="text-xs text-gray-500 mb-1 italic">“Cắn một miếng, ngoạm cả bầu trời”</p>
                        <p class="text-sm text-gray-600 mt-1">Hình cá mập béo tròn, đầu nhô ra khỏi bánh kem. Bên trong là lớp mousse vani mềm như mây, thêm lõi phô mai chảy nhẹ.</p>
                        <p class="text-lg font-semibold text-pink-500 mt-2">Giá: 135.000 VNĐ</p>
                        <button class="add-to-cart-btn mt-3 bg-blue-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-600 transition-colors stylish-button-enhanced relative overflow-hidden">Thêm vào giỏ <i class="fas fa-cart-plus ml-1"></i><span class="ripple-container"></span></button>
                    </div>
                </div>
                <div class="cake-gallery-card reveal-on-scroll slide-in-up" style="transition-delay: 0.1s;" data-category="dacbiet" data-id="banh-lava" data-name="Bánh Lava Núi Lửa" data-price="40000" data-image="asset/Image/banh-lava-nui-lua-bien-sau.webp">
                    <img src="asset/Image/banh-lava-nui-lua-bien-sau.webp" alt="Bánh Lava Núi Lửa Biển Sâu" class="w-full h-72 object-cover">
                    <div class="card-content">
                        <h3 class="text-2xl font-semibold mb-1 font-pacifico">Bánh Lava Núi Lửa</h3>
                        <p class="text-xs text-gray-500 mb-1 italic">“Đụng là phun, cắn là mê”</p>
                        <p class="text-sm text-gray-600 mt-1">Vỏ chocolate đen mịn, bên trong là dòng socola tan chảy ấm nóng. Một trải nghiệm bùng nổ!</p>
                        <p class="text-lg font-semibold text-pink-500 mt-2">Giá: 35.000 – 45.000 VNĐ</p>
                         <button class="add-to-cart-btn mt-3 bg-pink-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-pink-600 transition-colors stylish-button-enhanced relative overflow-hidden">Thêm vào giỏ <i class="fas fa-cart-plus ml-1"></i><span class="ripple-container"></span></button>
                    </div>
                </div>
                <div class="cake-gallery-card reveal-on-scroll slide-in-right" style="transition-delay: 0.2s;" data-category="cupcake" data-id="cupcake-ca-map" data-name="Cupcake Cá Mập" data-price="38000" data-image="asset/Image/cupcake-ca-map-nhay-nhot.jpg">
                    <img src="asset/Image/cupcake-ca-map-nhay-nhot.jpg" alt="Cupcake Cá Mập Nhảy Nhót" class="w-full h-72 object-cover">
                    <div class="card-content">
                        <h3 class="text-2xl font-semibold mb-1 font-pacifico">Cupcake Cá Mập</h3>
                        <p class="text-xs text-gray-500 mb-1 italic">“Nhìn thấy vui, ăn xong lắc luôn mông”</p>
                        <p class="text-sm text-gray-600 mt-1">Đầu cá mập nhảy lên khỏi sóng kem pastel. Vây marshmallow bóp được siêu cưng. Mua 4 tặng 1!</p>
                        <p class="text-lg font-semibold text-pink-500 mt-2">Giá: 35.000 – 40.000 VNĐ</p>
                         <button class="add-to-cart-btn mt-3 bg-yellow-500 text-gray-800 px-4 py-2 rounded-lg text-sm hover:bg-yellow-600 transition-colors stylish-button-enhanced relative overflow-hidden">Thêm vào giỏ <i class="fas fa-cart-plus ml-1"></i><span class="ripple-container"></span></button>
                    </div>
                </div>
                <div class="cake-gallery-card reveal-on-scroll slide-in-left" style="transition-delay: 0.3s;" data-category="sinhnhat" data-id="banh-ca-map-truot-bang" data-name="Cá Mập Trượt Băng" data-price="180000" data-image="asset/Image/banh-kem-ca-map-truot-bang.jpg">
                    <img src="asset/Image/banh-kem-ca-map-truot-bang.jpg" alt="Bánh Kem Cá Mập Trượt Băng" class="w-full h-72 object-cover">
                    <div class="card-content">
                        <h3 class="text-2xl font-semibold mb-1 font-pacifico">Cá Mập Trượt Băng</h3>
                         <p class="text-xs text-gray-500 mb-1 italic">“Sinh nhật lạnh mà tình cảm ấm”</p>
                        <p class="text-sm text-gray-600 mt-1">Bánh kem lớp xanh biển, trên có mô hình cá mập trượt băng mini (gỡ ra chơi được). Vị sữa dâu lạnh nhẹ, ngọt thanh kiểu Hàn Quốc.</p>
                        <p class="text-lg font-semibold text-pink-500 mt-2">Giá: 165.000 – 195.000 VNĐ</p>
                         <button class="add-to-cart-btn mt-3 bg-green-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-green-600 transition-colors stylish-button-enhanced relative overflow-hidden">Thêm vào giỏ <i class="fas fa-cart-plus ml-1"></i><span class="ripple-container"></span></button>
                    </div>
                </div>
                <div class="cake-gallery-card reveal-on-scroll slide-in-up" style="transition-delay: 0.4s;" data-category="dacbiet" data-id="banh-mat-troi" data-name="Bánh Mặt Trời Bé Con" data-price="16000" data-image="asset/Image/banh-mat-troi-be-con.jpg">
                    <img src="asset/Image/banh-mat-troi-be-con.jpg" alt="Bánh Mặt Trời Bé Con" class="w-full h-72 object-cover">
                    <div class="card-content">
                        <h3 class="text-2xl font-semibold mb-1 font-pacifico">Bánh Mặt Trời Bé Con</h3>
                        <p class="text-xs text-gray-500 mb-1 italic">“Mỗi đứa trẻ là một mặt trời bé dại”</p>
                        <p class="text-sm text-gray-600 mt-1">Bánh đặc biệt tặng khi bé đạt thành tích nhỏ: bé ngoan, học giỏi… Mặt cười tươi, nhân dâu tằm thơm lừng.</p>
                        <p class="text-lg font-semibold text-pink-500 mt-2">Giá: 16.000 VNĐ</p>
                         <button class="add-to-cart-btn mt-3 bg-purple-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-purple-600 transition-colors stylish-button-enhanced relative overflow-hidden">Thêm vào giỏ <i class="fas fa-cart-plus ml-1"></i><span class="ripple-container"></span></button>
                    </div>
                </div>
                <div class="cake-gallery-card reveal-on-scroll slide-in-right" style="transition-delay: 0.5s;" data-category="banhlanh" data-id="banh-lanh-ca-map" data-name="Cá Mập Lạnh Run" data-price="32000" data-image="asset/Image/banh-lanh-ca-map-lanh-run.jpg">
                    <img src="asset/Image/banh-lanh-ca-map-lanh-run.jpg" alt="Bánh lạnh Cá Mập Lạnh Run" class="w-full h-72 object-cover">
                    <div class="card-content">
                        <h3 class="text-2xl font-semibold mb-1 font-pacifico">Cá Mập Lạnh Run</h3>
                        <p class="text-xs text-gray-500 mb-1 italic">“Cắn là tê, mê là nghiện”</p>
                        <p class="text-sm text-gray-600 mt-1">Bánh lạnh que cầm tay, tạo hình cá mập/sinh vật biển, phủ chocolate giòn, nhân kem mát lạnh đủ vị. Ăn không cần muỗng!</p>
                        <p class="text-lg font-semibold text-pink-500 mt-2">Giá: 29.000 – 35.000 VNĐ/que</p>
                         <button class="add-to-cart-btn mt-3 bg-orange-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-orange-600 transition-colors stylish-button-enhanced relative overflow-hidden">Thêm vào giỏ <i class="fas fa-cart-plus ml-1"></i><span class="ripple-container"></span></button>
                    </div>
                </div>
            </div>
            <div class="text-center mt-16 reveal-on-scroll slide-in-up">
                <a href="Index.html#order" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-4 px-10 rounded-full text-xl transition duration-300 transform hover:scale-105 shadow-lg stylish-button-enhanced relative overflow-hidden">
                    Đặt Bánh Theo Yêu Cầu
                    <span class="ripple-container"></span>
                </a>
            </div>
        </div>
    </section>

     <footer id="contact" class="full-bleed-bg bg-blue-600 text-white py-12 md:py-20 relative z-10">
        <div class="section-container text-center">
            <h2 class="text-3xl md:text-4xl font-bold mb-8 font-pacifico">Liên Hệ Với Chúng Tôi</h2>
            <img src="asset/Image/shark-logo.png" alt="Logo Tiệm Bánh Cá Mập Con ở footer" class="mx-auto mb-6 h-20 w-20 md:h-24 md:w-24 rounded-full shadow-lg border-2 border-white">
            <p class="mb-3 text-lg">Địa chỉ: 123 Đường Biển Xanh, Thành Phố Vui Vẻ, Việt Nam</p>
            <p class="mb-3 text-lg">Điện thoại: <a href="tel:0865726848" class="hover:text-yellow-300 transition-colors">0865-726-848</a></p>
            <p class="mb-8 text-lg">Email: <a href="mailto:hello@camapconbakery.com" class="hover:text-yellow-300 transition-colors">hello@camapconbakery.com</a></p>
            <div class="mb-8">
                <h4 class="text-xl font-semibold mb-3">Giờ Mở Cửa:</h4>
                <p>Thứ 2 - Thứ 7: 8:00 AM - 8:00 PM</p>
                <p>Chủ Nhật: 9:00 AM - 6:00 PM (Vui lòng đặt trước)</p>
            </div>
            <div class="flex justify-center space-x-6 mb-8">
                <a href="https://www.facebook.com/anghoanphuc.2025" target="_blank" aria-label="Facebook của Tiệm Bánh Cá Mập Con" class="text-white hover:text-yellow-300 transition duration-300 transform hover:scale-110">
                    <i class="fab fa-facebook fa-2x"></i>
                </a>
                <a href="https://www.instagram.com/camapconbakery_official" target="_blank" aria-label="Instagram của Tiệm Bánh Cá Mập Con" class="text-white hover:text-yellow-300 transition duration-300 transform hover:scale-110">
                   <i class="fab fa-instagram fa-2x"></i>
                </a>
                <a href="https://www.tiktok.com/?utm_source=chatgpt.com" target="_blank" aria-label="Tiktok của Tiệm Bánh Cá Mập Con" class="text-white hover:text-yellow-300 transition duration-300 transform hover:scale-110">
                     <i class="fab fa-tiktok fa-2x"></i>
                </a>
                 <a href="https://zalo.me/0865726848" target="_blank" aria-label="Zalo của Tiệm Bánh Cá Mập Con" class="text-white hover:text-yellow-300 transition duration-300 transform hover:scale-110">
                    <i class="fas fa-comment-dots fa-2x"></i> 
                </a>
            </div>
             <div class="mb-8 reveal-on-scroll slide-in-up">
                <h4 class="text-xl font-semibold mb-3">Tìm Chúng Tôi Trên Bản Đồ:</h4>
                <div class="w-full max-w-md h-64 bg-gray-700 rounded-lg mx-auto flex items-center justify-center text-gray-400 border-2 border-blue-400 shadow-lg overflow-hidden">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3914.1234567890123!2d106.70000000000001!3d10.800000000000002!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMTDCsDQ4JzAwLjAiTiAxMDbCsDQyJzAwLjAiRQ!5e0!3m2!1svi!2s!4v1620000000000!5m2!1svi!2s" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
            </div>
            <p class="text-md text-blue-200">© <span id="currentYear"></span> Tiệm Bánh Cá Mập Con. All Rights Reserved.</p>
            <p class="text-sm text-blue-300 mt-2">Website được thiết kế với <i class="fas fa-heart text-red-400"></i> bởi AI.</p>
        </div>
    </footer>
    <script>
        // Tone.js Polyfill
        if (typeof globalThis.AudioWorkletGlobalScope === 'undefined') globalThis.AudioWorkletGlobalScope = {};
        if (typeof globalThis.AudioWorkletProcessor === 'undefined') globalThis.AudioWorkletProcessor = class AudioWorkletProcessor {};

        document.addEventListener('DOMContentLoaded', () => {
            // --- HERO STRIP 3D BACKGROUND ---
            const heroStrip3DBackground = document.getElementById('hero-strip-3d-background');
            if (heroStrip3DBackground && typeof THREE !== 'undefined') {
                let scene, camera, renderer, particles;
                const parentSection = heroStrip3DBackground.parentElement; 
                let animationFrameId_HeroStrip3D;

                function initHeroStrip3D() {
                    scene = new THREE.Scene();
                    if (!parentSection) return;
                    const width = parentSection.offsetWidth;
                    const height = parentSection.offsetHeight;
                    if (width === 0 || height === 0) {
                        setTimeout(initHeroStrip3D, 100);
                        return;
                    }

                    camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
                    camera.position.z = 5; 

                    renderer = new THREE.WebGLRenderer({ alpha: true });
                    renderer.setSize(width, height);
                    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                    heroStrip3DBackground.innerHTML = ''; 
                    heroStrip3DBackground.appendChild(renderer.domElement);

                    const particleGeometry = new THREE.BufferGeometry();
                    const particleMaterial = new THREE.PointsMaterial({
                        color: 0xFFDAB9, 
                        size: 0.05, transparent: true, opacity: 0.6,
                        blending: THREE.AdditiveBlending
                    });
                    const particleVertices = [];
                    for (let i = 0; i < 3000; i++) {
                        const x = (Math.random() - 0.5) * 30;
                        const y = (Math.random() - 0.5) * 15; 
                        const z = (Math.random() - 0.5) * 10;
                        particleVertices.push(x, y, z);
                    }
                    particleGeometry.setAttribute('position', new THREE.Float32BufferAttribute(particleVertices, 3));
                    particles = new THREE.Points(particleGeometry, particleMaterial);
                    scene.add(particles);

                    window.addEventListener('resize', onHeroStrip3DResize, false);
                }
                
                function onHeroStrip3DResize() {
                    if (!renderer || !camera || !parentSection) return;
                    const width = parentSection.offsetWidth;
                    const height = parentSection.offsetHeight;
                    if (width === 0 || height === 0) return;
                    camera.aspect = width / height;
                    camera.updateProjectionMatrix();
                    renderer.setSize(width, height);
                    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                }

                let mouseX_strip = 0;
                if (parentSection) { 
                    parentSection.addEventListener('mousemove', (event) => { 
                        const rect = parentSection.getBoundingClientRect();
                        mouseX_strip = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                    });
                }

                function animateHeroStrip3D() {
                    animationFrameId_HeroStrip3D = requestAnimationFrame(animateHeroStrip3D);
                    if (!particles || !scene || !camera || !renderer) return;
                    particles.rotation.y += 0.0005 + mouseX_strip * 0.001; 
                    particles.rotation.x += 0.0002;
                    renderer.render(scene, camera);
                }
                
                if (parentSection) {
                    const heroStripObserver = new IntersectionObserver((entries) => {
                        if (entries[0].isIntersecting) {
                            if (!scene) initHeroStrip3D();
                            if (animationFrameId_HeroStrip3D === undefined && scene) animateHeroStrip3D();
                        } else {
                            if (animationFrameId_HeroStrip3D) {
                                cancelAnimationFrame(animationFrameId_HeroStrip3D);
                                animationFrameId_HeroStrip3D = undefined;
                            }
                        }
                    }, { threshold: 0.01 });
                    heroStripObserver.observe(parentSection);
                }
            }


            // --- SUGAR CRYSTAL GROWTH (CANVAS 2D) ---
            const sugarCrystalCanvasMaubanh = document.getElementById('sugar-crystal-canvas-maubanh');
            if (sugarCrystalCanvasMaubanh) {
                const ctx = sugarCrystalCanvasMaubanh.getContext('2d');
                let width, height;
                let sugarBranches = [];
                let sugarFrameCount = 0;
                const maxSugarBranches = 3; 
                const sugarGrowthSpeed = 0.5;
                let sugarAnimationIdMaubanh;

                function setupSugarCrystalCanvasMaubanh() {
                    const container = sugarCrystalCanvasMaubanh.parentElement;
                    width = Math.min(container.offsetWidth * 0.8, 450); 
                    height = Math.min(window.innerHeight * 0.45, 380); 
                    sugarCrystalCanvasMaubanh.width = width;
                    sugarCrystalCanvasMaubanh.height = height;
                    ctx.shadowBlur = 10;
                    ctx.shadowColor = 'rgba(255, 182, 193, 0.5)'; 
                    sugarBranches = []; 
                    for (let i = 0; i < maxSugarBranches; i++) {
                        sugarBranches.push(new SugarBranchMaubanh(width / 2, height, Math.PI * 1.5 + (Math.random() - 0.5) * 0.5, 7));
                    }
                }

                class SugarBranchMaubanh { 
                    constructor(x, y, angle, length, depth = 0) {
                        this.x = x; this.y = y; this.angle = angle; this.length = length;
                        this.maxLength = Math.random() * 40 + 35 - depth * 5;
                        this.currentLength = 0; this.children = []; this.depth = depth;
                        const hue = 330 + Math.random() * 50; 
                        this.color = `hsla(${hue}, 95%, ${75 - depth * 4}%, ${0.8 - depth * 0.1})`;
                        this.lineWidth = Math.max(0.25, 2.2 - depth * 0.3);
                    }
                    grow() {
                        if (this.currentLength < this.maxLength) {
                            this.currentLength += sugarGrowthSpeed;
                        } else if (this.depth < 4 && this.children.length === 0 && sugarBranches.reduce((acc, b) => acc + b.countChildren(), 0) < 800) { 
                            const numNewBranches = Math.floor(Math.random() * 2) + 1; 
                            for (let i = 0; i < numNewBranches; i++) {
                                const newAngle = this.angle + (Math.random() - 0.5) * (Math.PI / 2.3);
                                this.children.push(new SugarBranchMaubanh(
                                    this.x + Math.cos(this.angle) * this.maxLength,
                                    this.y + Math.sin(this.angle) * this.maxLength,
                                    newAngle, this.length * 0.78, this.depth + 1
                                ));
                            }
                        }
                        this.children.forEach(child => child.grow());
                    }
                    countChildren() { 
                        let count = 1; 
                        this.children.forEach(child => { count += child.countChildren(); });
                        return count;
                    }
                    draw() {
                        ctx.save();
                        ctx.strokeStyle = this.color;
                        ctx.lineWidth = this.lineWidth;
                        ctx.shadowColor = this.color.replace(/hsla\((.*), (.*)%, (.*)%, (.*)\)/, `hsla($1, $2%, $3%, 0.5)`);
                        ctx.beginPath();
                        ctx.moveTo(this.x, this.y);
                        ctx.lineTo(
                            this.x + Math.cos(this.angle) * this.currentLength,
                            this.y + Math.sin(this.angle) * this.currentLength
                        );
                        ctx.stroke();
                        if (Math.random() < 0.06 && this.currentLength > 8) {
                            const sparkleX = this.x + Math.cos(this.angle) * (this.currentLength * Math.random());
                            const sparkleY = this.y + Math.sin(this.angle) * (this.currentLength * Math.random());
                            ctx.fillStyle = `hsla(${Math.random() * 360}, 100%, 95%, 0.95)`;
                            ctx.beginPath();
                            ctx.arc(sparkleX, sparkleY, Math.random() * 1.2 + 0.4, 0, Math.PI * 2);
                            ctx.fill();
                        }
                        ctx.restore();
                        this.children.forEach(child => child.draw());
                    }
                }

                function animateSugarCrystallineMaubanh() {
                    sugarFrameCount++;
                    if (sugarFrameCount % 2 === 0) { 
                        ctx.clearRect(0, 0, width, height);
                        sugarBranches.forEach(branch => { branch.grow(); branch.draw(); });
                    }
                    sugarAnimationIdMaubanh = requestAnimationFrame(animateSugarCrystallineMaubanh);
                }
                
                const sugarCrystalObserverMaubanh = new IntersectionObserver((entries) => {
                    if (entries[0].isIntersecting) {
                        if (sugarBranches.length === 0) { 
                             setupSugarCrystalCanvasMaubanh();
                             if(sugarAnimationIdMaubanh) cancelAnimationFrame(sugarAnimationIdMaubanh); 
                             animateSugarCrystallineMaubanh();
                        } else if (!sugarAnimationIdMaubanh) { 
                            animateSugarCrystallineMaubanh();
                        }
                    } else {
                        if(sugarAnimationIdMaubanh) cancelAnimationFrame(sugarAnimationIdMaubanh); 
                        sugarAnimationIdMaubanh = null;
                    }
                }, { threshold: 0.05 });
                sugarCrystalObserverMaubanh.observe(sugarCrystalCanvasMaubanh);
                
                window.addEventListener('resize', () => { 
                    const isVisible = sugarCrystalCanvasMaubanh.offsetParent !== null;
                    if (isVisible) { 
                        if(sugarAnimationIdMaubanh) cancelAnimationFrame(sugarAnimationIdMaubanh);
                        setupSugarCrystalCanvasMaubanh(); 
                        animateSugarCrystallineMaubanh();
                    }
                });
            }


            const letterRevealElements = document.querySelectorAll('.letter-reveal-bakery-page'); 
            letterRevealElements.forEach(el => {
                const text = el.textContent; 
                el.innerHTML = text.split('').map((char, i) => 
                    `<span style="animation-delay: ${i * 0.05 + 0.25}s">${char === ' ' ? ' ' : char}</span>`
                ).join('');
            });

            const scrollElements = document.querySelectorAll('.reveal-on-scroll');
            const elementInView = (el, percentageScroll = 100) => {
                const elementTop = el.getBoundingClientRect().top;
                return (elementTop <= (window.innerHeight || document.documentElement.clientHeight) * (percentageScroll/100));
            };
            const displayScrollElement = (element) => element.classList.add('is-visible');
            const handleScrollAnimation = () => {
                scrollElements.forEach((el) => {
                    if (elementInView(el, 78)) { displayScrollElement(el); } 
                });
            };
            handleScrollAnimation(); 
            window.addEventListener('scroll', handleScrollAnimation);

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }

            const navLinks = document.querySelectorAll('header nav a, #mobile-menu a');
            const sections = Array.from(document.querySelectorAll('section[id]')); 
            const heroStripSection = document.querySelector('.interactive-image-strip-section');
            if (heroStripSection && !heroStripSection.id) heroStripSection.id = 'hero-strip-maubanh'; 
            if (heroStripSection) sections.unshift(heroStripSection); 

            function changeNavActiveStateMaubanh() {
                let index = sections.length;
                while(--index && window.scrollY + 100 < sections[index].offsetTop) {} 
                
                navLinks.forEach((link) => link.classList.remove('active-link'));
                
                const currentSectionId = sections[index] ? sections[index].id : null;

                if (currentSectionId) {
                     const activeLink = document.querySelector(`header nav a[href="maubanh.html#${currentSectionId}"], header nav a[href="#${currentSectionId}"], #mobile-menu a[href="maubanh.html#${currentSectionId}"], #mobile-menu a[href="#${currentSectionId}"]`);
                    if (activeLink) {
                        activeLink.classList.add('active-link');
                    } else if (currentSectionId === 'hero-strip-maubanh' || sections[index] === heroStripSection) {
                         const mauBanhLink = document.querySelector('header nav a[href="maubanh.html"], #mobile-menu a[href="maubanh.html"]');
                         if(mauBanhLink) mauBanhLink.classList.add('active-link');
                    }
                } else if (window.location.pathname.includes('maubanh.html')) { 
                     const mauBanhLink = document.querySelector('header nav a[href="maubanh.html"], #mobile-menu a[href="maubanh.html"]');
                     if(mauBanhLink) mauBanhLink.classList.add('active-link');
                }
            }
            changeNavActiveStateMaubanh();
            window.addEventListener('scroll', changeNavActiveStateMaubanh);


            navLinks.forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (mobileMenu && this.closest('#mobile-menu a')) { 
                         setTimeout(() => mobileMenu.classList.add('hidden'), 150); 
                    } else if (mobileMenu && !this.closest('#mobile-menu a') && !mobileMenu.classList.contains('hidden')) {
                        mobileMenu.classList.add('hidden');
                    }

                    if (href.startsWith('#') || (href.startsWith('Index.html#') && window.location.pathname.includes('Index.html')) ) { 
                        let targetHash = href;
                        if(href.startsWith('Index.html#')) { 
                            return;
                        }
                        
                        const targetElement = document.querySelector(targetHash);
                        if (targetElement) {
                            e.preventDefault();
                            targetElement.scrollIntoView({ behavior: 'smooth' });
                        }
                    } else if (href.includes('#') && href.split('#')[0] === window.location.pathname.split('/').pop()) {
                        const targetHash = href.substring(href.indexOf('#'));
                        const targetElement = document.querySelector(targetHash);
                        if (targetElement) {
                            e.preventDefault();
                            targetElement.scrollIntoView({ behavior: 'smooth' });
                        }
                    }
                });
            });

            const currentYearElement = document.getElementById('currentYear');
            if (currentYearElement) {
                currentYearElement.textContent = new Date().getFullYear();
            }
            
            const stylishButtons = document.querySelectorAll('.stylish-button-enhanced'); 
            stylishButtons.forEach(button => {
                button.addEventListener('click', function (e) {
                    if (e.target.closest('i')) return;
                    const rect = button.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const rippleContainer = button.querySelector('.ripple-container') || button; 
                    const ripple = document.createElement('span');
                    ripple.classList.add('ripple'); 
                    ripple.style.left = x + 'px';
                    ripple.style.top = y + 'px';
                    const existingRipple = rippleContainer.querySelector('.ripple');
                    if(existingRipple) existingRipple.remove();
                    rippleContainer.appendChild(ripple);
                    ripple.addEventListener('animationend', () => ripple.remove());
                });
            });

            // --- Shopping Cart Logic ---
            const cartModal = document.getElementById('cart-modal');
            const cartModalOverlay = document.getElementById('cart-modal-overlay'); // Thêm overlay
            const cartIconBtn = document.getElementById('cart-icon-btn');
            const cartIconBtnMobile = document.getElementById('cart-icon-btn-mobile');
            const cartCloseBtn = document.getElementById('cart-close');
            const cartBody = document.getElementById('cart-body');
            const cartTotalAmount = document.getElementById('cart-total-amount');
            const cartCountBadge = document.getElementById('cart-count-badge');
            const cartCountBadgeMobile = document.getElementById('cart-count-badge-mobile');
            const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');

            let cart = JSON.parse(localStorage.getItem('babySharkCart')) || [];

            function openCart() {
                if(cartModal) cartModal.classList.add('open');
                if(cartModalOverlay) cartModalOverlay.classList.add('open'); // Mở overlay
                document.body.classList.add('cart-open-no-scroll'); // Ngăn cuộn body
                updateCartUI();
            }
            function closeCart() {
                if(cartModal) cartModal.classList.remove('open');
                if(cartModalOverlay) cartModalOverlay.classList.remove('open'); // Đóng overlay
                document.body.classList.remove('cart-open-no-scroll'); // Cho phép cuộn body lại
            }
            
            if(cartModalOverlay) { // Thêm sự kiện click cho overlay để đóng giỏ hàng
                cartModalOverlay.addEventListener('click', closeCart);
            }

            function updateCartUI() {
                if (!cartBody || !cartTotalAmount || !cartCountBadge || !cartCountBadgeMobile) return;

                cartBody.innerHTML = ''; 
                if (cart.length === 0) {
                    cartBody.innerHTML = '<p class="cart-empty-message">Giỏ hàng của bạn đang trống!</p>';
                } else {
                    cart.forEach(item => {
                        const cartItemEl = document.createElement('div');
                        cartItemEl.classList.add('cart-item');
                        cartItemEl.innerHTML = `
                            <img src="${item.image}" alt="${item.name}" onerror="this.onerror=null;this.src='https://placehold.co/80x80/E0E0E0/909090?text=Ảnh+Lỗi';">
                            <div class="cart-item-details">
                                <h4>${item.name}</h4>
                                <p class="item-price">${parseInt(item.price).toLocaleString('vi-VN')} VNĐ</p>
                                <div class="cart-item-controls">
                                    <div class="cart-item-quantity">
                                        <button class="qty-decrease-btn" data-id="${item.id}" aria-label="Giảm số lượng ${item.name}">-</button>
                                        <input type="number" value="${item.quantity}" min="1" data-id="${item.id}" class="cart-item-qty-input w-12 text-center border rounded" aria-label="Số lượng ${item.name}">
                                        <button class="qty-increase-btn" data-id="${item.id}" aria-label="Tăng số lượng ${item.name}">+</button>
                                    </div>
                                    <button class="cart-item-remove-btn" data-id="${item.id}" aria-label="Xóa ${item.name} khỏi giỏ hàng"><i class="fas fa-trash-alt"></i></button>
                                </div>
                            </div>
                        `;
                        cartBody.appendChild(cartItemEl);
                    });
                }
                updateCartTotal();
                updateCartCount();

                document.querySelectorAll('.cart-item-qty-input').forEach(input => {
                    input.addEventListener('change', handleQuantityChange);
                    input.addEventListener('keyup', (e) => { // Thêm keyup để bắt Enter
                        if (e.key === 'Enter') handleQuantityChange(e);
                    });
                });
                document.querySelectorAll('.cart-item-remove-btn').forEach(btn => {
                    btn.addEventListener('click', handleRemoveItem);
                });
                document.querySelectorAll('.qty-decrease-btn').forEach(btn => {
                    btn.addEventListener('click', handleQuantityButton);
                });
                document.querySelectorAll('.qty-increase-btn').forEach(btn => {
                    btn.addEventListener('click', handleQuantityButton);
                });
            }
            
            function handleQuantityButton(event) {
                const itemId = event.currentTarget.dataset.id;
                const itemInCart = cart.find(item => item.id === itemId);
                if (!itemInCart) return;

                if (event.currentTarget.classList.contains('qty-decrease-btn')) {
                    if (itemInCart.quantity > 1) {
                        itemInCart.quantity--;
                    } else { // Nếu số lượng là 1 và nhấn giảm, thì xóa sản phẩm
                        cart = cart.filter(item => item.id !== itemId);
                    }
                } else if (event.currentTarget.classList.contains('qty-increase-btn')) {
                    itemInCart.quantity++;
                }
                saveCart();
                updateCartUI();
            }


            function updateCartTotal() {
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                if(cartTotalAmount) cartTotalAmount.textContent = total.toLocaleString('vi-VN') + ' VNĐ';
            }
            
            function updateCartCount() {
                const count = cart.reduce((sum, item) => sum + item.quantity, 0);
                if (cartCountBadge) {
                    cartCountBadge.textContent = count;
                    cartCountBadge.classList.toggle('hidden', count === 0);
                }
                if (cartCountBadgeMobile) {
                    cartCountBadgeMobile.textContent = count;
                    cartCountBadgeMobile.classList.toggle('hidden', count === 0);
                }
            }

            function saveCart() {
                localStorage.setItem('babySharkCart', JSON.stringify(cart));
            }

            function handleAddItem(event) {
                const button = event.currentTarget;
                const card = button.closest('.cake-gallery-card');
                if (!card) return; 

                const itemId = card.dataset.id;
                const itemName = card.dataset.name;
                const itemPrice = parseInt(card.dataset.price);
                const itemImage = card.dataset.image;

                if (!itemId || !itemName || isNaN(itemPrice) || !itemImage) {
                    console.error("Thông tin sản phẩm không đầy đủ:", card.dataset);
                    return;
                }

                const existingItem = cart.find(item => item.id === itemId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ id: itemId, name: itemName, price: itemPrice, image: itemImage, quantity: 1 });
                }
                saveCart();
                updateCartUI(); 
                openCart(); 
                const confirmation = document.createElement('div');
                confirmation.textContent = `${itemName} đã được thêm vào giỏ!`;
                confirmation.className = 'fixed bottom-5 right-5 bg-green-500 text-white py-2 px-4 rounded-lg shadow-lg z-[1001] transform transition-all duration-300 ease-out opacity-0 translate-y-2';
                document.body.appendChild(confirmation);
                // Animation cho thông báo
                setTimeout(() => {
                    confirmation.classList.remove('opacity-0', 'translate-y-2');
                    confirmation.classList.add('opacity-100', 'translate-y-0');
                }, 10);
                setTimeout(() => {
                    confirmation.classList.remove('opacity-100', 'translate-y-0');
                    confirmation.classList.add('opacity-0', 'translate-y-2');
                    setTimeout(() => confirmation.remove(), 300);
                }, 2000);
            }

            function handleQuantityChange(event) {
                const itemId = event.target.dataset.id;
                const newQuantity = parseInt(event.target.value);
                const itemInCart = cart.find(item => item.id === itemId);
                if (itemInCart && newQuantity > 0) {
                    itemInCart.quantity = newQuantity;
                } else if (itemInCart && newQuantity <= 0) { 
                    cart = cart.filter(item => item.id !== itemId);
                }
                saveCart();
                updateCartUI();
            }

            function handleRemoveItem(event) {
                const itemId = event.currentTarget.dataset.id;
                cart = cart.filter(item => item.id !== itemId);
                saveCart();
                updateCartUI();
            }

            if(cartIconBtn) cartIconBtn.addEventListener('click', openCart);
            if(cartIconBtnMobile) cartIconBtnMobile.addEventListener('click', openCart);
            if(cartCloseBtn) cartCloseBtn.addEventListener('click', closeCart);
            addToCartButtons.forEach(button => {
                button.addEventListener('click', handleAddItem);
            });

            updateCartUI();


            const filterButtons = document.querySelectorAll('.filter-button');
            const cakeCards = document.querySelectorAll('.cake-gallery-card');

            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    const filterValue = button.getAttribute('data-filter');

                    cakeCards.forEach(card => {
                        const categories = card.getAttribute('data-category').split(' ');
                        if (filterValue === 'all' || categories.includes(filterValue)) {
                            card.style.display = 'block'; 
                            setTimeout(() => card.classList.add('is-visible'), 50); 
                        } else {
                            card.style.display = 'none';
                            card.classList.remove('is-visible'); 
                        }
                    });
                });
            });


        });
    </script>
</body>
</html>
